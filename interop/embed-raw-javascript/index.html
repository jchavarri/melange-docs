<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=3">
  <meta http-equiv="cleartype" content="on">
  <title>
   Embed Raw JavaScript â€” Melange.re
  </title>
  <link href="https://jchavarri.github.io/melange-docs/assets/styles/just-the-docs-default.css" rel="stylesheet">
  <link href="https://jchavarri.github.io/melange-docs/assets/styles/prism.css" rel="stylesheet">
  <link href="https://jchavarri.github.io/melange-docs/assets/styles/main.css" rel="stylesheet">
  <meta name="description" content="Melange is a mixture of tooling combined to produce JavaScript from OCaml &amp; Reason.">
 </head>
 <body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <symbol id="svg-link" viewbox="0 0 24 24">
    <title>
     Link
    </title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
     <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
     <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
    </svg>
   </symbol>
   <symbol id="svg-search" viewbox="0 0 24 24">
    <title>
     Search
    </title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
     <circle cx="11" cy="11" r="8"></circle>
     <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
   </symbol>
   <symbol id="svg-menu" viewbox="0 0 24 24">
    <title>
     Menu
    </title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
     <line x1="3" y1="12" x2="21" y2="12"></line>
     <line x1="3" y1="6" x2="21" y2="6"></line>
     <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
   </symbol>
   <symbol id="svg-arrow-right" viewbox="0 0 24 24">
    <title>
     Expand
    </title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
     <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
   </symbol>
   <symbol id="svg-doc" viewbox="0 0 24 24">
    <title>
     Document
    </title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
     <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
     <polyline points="13 2 13 9 20 9"></polyline>
    </svg>
   </symbol>
  </svg>
  <div class="side-bar">
   <div class="site-header">
    <a href="https://jchavarri.github.io/melange-docs/" class="site-title lh-tight">
        Melange.re </a> <a href="#" id="menu-button" class="site-button"> 
    <svg viewbox="0 0 24 24" class="icon">
     
          
     <use href="#svg-menu"></use>
     
        
    </svg>
     
   </a>
  </div>
  <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
   <ul class="nav-list">
    <li class="nav-list-item">
     <a href="https://jchavarri.github.io/melange-docs/intro" class="nav-list-link">Intro</a>
    </li>
    <li class="nav-list-item">
     <a href="https://jchavarri.github.io/melange-docs/installation" class="nav-list-link">Installation</a>
    </li>
    <li class="nav-list-item active">
     <a href="#" class="nav-list-expander">
     <svg viewbox="0 0 24 24">
      <use href="#svg-arrow-right"></use>
     </svg>
    </a>
    <a href="https://jchavarri.github.io/melange-docs/interop" class="nav-list-link">Interop</a>
    <ul class="nav-list ">
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/cheatsheet" class="nav-list-link">Cheatsheet</a>
     </li>
     <li class="nav-list-item active">
      <a href="https://jchavarri.github.io/melange-docs/interop/embed-raw-javascript" class="nav-list-link active">Embed Raw JavaScript</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/data-types" class="nav-list-link">Representation of Types</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/intro-to-external" class="nav-list-link">Intro to External</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/bind-to-global-values" class="nav-list-link">Bind to global values</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/null-undefined-option" class="nav-list-link">Null, Undefined &amp; Option</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/object" class="nav-list-link">Object</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/class" class="nav-list-link">Class</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/function" class="nav-list-link">Function</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/property-access" class="nav-list-link">Property access</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/import-export" class="nav-list-link">Import and export</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/regular-expression" class="nav-list-link">Regular expressions</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/exceptions" class="nav-list-link">Exceptions</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/json" class="nav-list-link">JSON</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/pipe-first" class="nav-list-link">Pipe first</a>
     </li>
     <li class="nav-list-item">
      <a href="https://jchavarri.github.io/melange-docs/interop/misc" class="nav-list-link">Miscellaneous</a>
     </li>
    </ul>
   </li>
   <li class="nav-list-item">
    <a href="#" class="nav-list-expander">
    <svg viewbox="0 0 24 24">
     <use href="#svg-arrow-right"></use>
    </svg>
   </a>
   <a href="https://jchavarri.github.io/melange-docs/building" class="nav-list-link">Build system</a>
   <ul class="nav-list ">
    <li class="nav-list-item">
     <a href="https://jchavarri.github.io/melange-docs/building/dune-integration" class="nav-list-link">Dune integration</a>
    </li>
    <li class="nav-list-item">
     <a href="https://jchavarri.github.io/melange-docs/building/generators" class="nav-list-link">Generators</a>
    </li>
    <li class="nav-list-item">
     <a href="https://jchavarri.github.io/melange-docs/building/virtual-libraries" class="nav-list-link">Virtual libraries</a>
    </li>
   </ul>
  </li>
 </ul>
</nav>
<footer class="site-footer">
 This site uses a modified version of <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>,
      adapted for <a href="https://soupault.app">Soupault</a>.
</footer>
</div>
<div class="main" id="top">
<div id="main-header" class="main-header">
 <div class="search"></div>
 <div id="toggleSyntaxContainer" class="BtnGroup">
  <button class="btn BtnGroup-item btn-sm" type="button">re</button>
        <button class="btn BtnGroup-item btn-sm" type="button">ml</button>
 </div>
 <nav aria-label="Auxiliary" class="aux-nav">
  <ul class="aux-nav-list">
   <li class="aux-nav-list-item">
    <a href="https://github.com/melange-re/melange" class="site-button" target="_blank" rel="noopener noreferrer"> Melange on GitHub </a>
   </li>
  </ul>
 </nav>
</div>
<div id="main-content-wrap" class="main-content-wrap">
 <div id="content" class="main-content" role="main">
  <h1 id="embed-raw-javascript" data-nav-order="320">
   Embed Raw JavaScript
  </h1>
  <ol class="toc">
   <li>
    <a href="#debugger">Debugger</a>
   </li>
   <li>
    <a href="#detect-global-variables">Detect Global Variables</a>
   </li>
  </ol>
  <p>
   Here is a last-resort escape first, that can be useful for prototyping. Here's how you can drop a chunk of JavaScript right into your Melange file:
  </p>
  <div class="tab">
   <a class="button-language-ocaml tablinks" href="#" onclick="openLangTab(event, 'language-ocaml')"><code>ml</code></a><a class="button-language-reason tablinks" href="#" onclick="openLangTab(event, 'language-reason')"><code>re</code></a><a class="tablinks" href="#" onclick="openLangTab(event, 'output-language-javascript')"><code>js</code></a>
  </div>
  <pre><code class="language-ocaml"><span class="token keyword">let</span> add <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">%</span>raw <span class="token punctuation">{</span><span class="token operator">|</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token type-variable function">'hello</span> from raw <span class="token module variable">JavaScript</span><span class="token operator">!</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>
    return a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token operator">|</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token keyword">let</span> <span class="token punctuation">_</span> <span class="token operator">=</span> <span class="token module variable">Js</span><span class="token punctuation">.</span>log <span class="token punctuation">(</span>add <span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code><code class="language-reason"><span class="token keyword">let</span> add <span class="token operator">=</span> <span class="token punctuation">[</span>%raw
  <span class="token punctuation">{</span><span class="token operator">|</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token operator">'</span>hello from raw <span class="token constructor variable">JavaScript</span><span class="token operator">!</span><span class="token operator">'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    return a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token operator">|</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> _ <span class="token operator">=</span> <span class="token class-name">Js</span><span class="token punctuation">.</span>log<span class="token punctuation">(</span>add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code>
external map : 'a array -&gt; ('a -&gt; 'b) -&gt; 'b array = "map" [@@bs.send]
external filter : 'a array -&gt; ('a -&gt; 'b) -&gt; 'b array = "filter" [@@bs.send]

type request'
external asyncRequest: unit -&gt; request' = "asyncRequest"
external setWaitDuration: request' -&gt; int -&gt; request' = "setWaitDuration" [@@bs.send]
external send: request' -&gt; unit = "send" [@@bs.send]
 let add = [%raw {|
  function(a, b) {
    console.log('hello from raw JavaScript!');
    return a + b;
  }
|}]

let _ = Js.log (add 1 2)
<code class="output-language-javascript"><span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello from raw JavaScript!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
  <p>
   The <code>{|foo|}</code> syntax stands for OCaml's multi-line, <a href="https://ocaml.org/manual/lex.html#quoted-string-id">"quoted string"</a> syntax. Think of them as the equivalent of JavaScript's template literals. No escaping is needed inside that string.
  </p>
  <p>
   Note the difference between OCaml and Reason syntax here. <code>[%raw foo]</code> allows you to embed an expression. For top-level declarations in OCaml/Reason, use <code>[%%raw foo]</code> (two <code>%</code>):
  </p>
  <div class="tab">
   <a class="button-language-ocaml tablinks" href="#" onclick="openLangTab(event, 'language-ocaml')"><code>ml</code></a><a class="button-language-reason tablinks" href="#" onclick="openLangTab(event, 'language-reason')"><code>re</code></a><a class="tablinks" href="#" onclick="openLangTab(event, 'output-language-javascript')"><code>js</code></a>
  </div>
  <pre><code class="language-ocaml"><span class="token punctuation">[</span><span class="token operator">%%</span>raw <span class="token string">"var a = 1"</span><span class="token punctuation">]</span>

<span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">%</span>raw <span class="token string">"function() {return 1}"</span><span class="token punctuation">]</span>
</code><code class="language-reason">%raw
<span class="token string">"var a = 1"</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">[</span>%raw <span class="token string">"function() {return 1}"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code>
external map : 'a array -&gt; ('a -&gt; 'b) -&gt; 'b array = "map" [@@bs.send]
external filter : 'a array -&gt; ('a -&gt; 'b) -&gt; 'b array = "filter" [@@bs.send]

type request'
external asyncRequest: unit -&gt; request' = "asyncRequest"
external setWaitDuration: request' -&gt; int -&gt; request' = "setWaitDuration" [@@bs.send]
external send: request' -&gt; unit = "send" [@@bs.send]
 [%%raw "var a = 1"]

let f = [%raw "function() {return 1}"]
<code class="output-language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">;</span>

<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
  <h2 id="debugger">
   <a class="here" href="#debugger">â†’ </a>Debugger
  </h2>
  <p>
   You can also drop a <code>[%debugger]</code> expression in a body:
  </p>
  <div class="tab">
   <a class="button-language-ocaml tablinks" href="#" onclick="openLangTab(event, 'language-ocaml')"><code>ml</code></a><a class="button-language-reason tablinks" href="#" onclick="openLangTab(event, 'language-reason')"><code>re</code></a><a class="tablinks" href="#" onclick="openLangTab(event, 'output-language-javascript')"><code>js</code></a>
  </div>
  <pre><code class="language-ocaml"><span class="token keyword">let</span> f x y <span class="token operator">=</span>
  <span class="token punctuation">[</span><span class="token operator">%</span>debugger<span class="token punctuation">]</span><span class="token punctuation">;</span>
  x <span class="token operator">+</span> y
</code><code class="language-reason"><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>%debugger<span class="token punctuation">]</span><span class="token punctuation">;</span>
  x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
external map : 'a array -&gt; ('a -&gt; 'b) -&gt; 'b array = "map" [@@bs.send]
external filter : 'a array -&gt; ('a -&gt; 'b) -&gt; 'b array = "filter" [@@bs.send]

type request'
external asyncRequest: unit -&gt; request' = "asyncRequest"
external setWaitDuration: request' -&gt; int -&gt; request' = "setWaitDuration" [@@bs.send]
external send: request' -&gt; unit = "send" [@@bs.send]
 let f x y =
  [%debugger];
  x + y
<code class="output-language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">debugger</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
  <h2 id="detect-global-variables">
   <a class="here" href="#detect-global-variables">â†’ </a>Detect Global Variables
  </h2>
  <p>
   Melange provides a relatively type safe approach for such use case: <code>external</code>. <code>[%external a_single_identifier]</code> is a value of type <code>option</code>. Example:
  </p>
  <div class="tab">
   <a class="button-language-ocaml tablinks" href="#" onclick="openLangTab(event, 'language-ocaml')"><code>ml</code></a><a class="button-language-reason tablinks" href="#" onclick="openLangTab(event, 'language-reason')"><code>re</code></a><a class="tablinks" href="#" onclick="openLangTab(event, 'output-language-javascript')"><code>js</code></a>
  </div>
  <pre><code class="language-ocaml"><span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">match</span> <span class="token punctuation">[</span><span class="token operator">%</span><span class="token keyword">external</span> __DEV__<span class="token punctuation">]</span> <span class="token keyword">with</span>
<span class="token operator">|</span> <span class="token module variable">Some</span> <span class="token punctuation">_</span> <span class="token operator">-&gt;</span> <span class="token module variable">Js</span><span class="token punctuation">.</span>log <span class="token string">"dev mode"</span>
<span class="token operator">|</span> <span class="token module variable">None</span> <span class="token operator">-&gt;</span> <span class="token module variable">Js</span><span class="token punctuation">.</span>log <span class="token string">"production mode"</span>
</code><code class="language-reason"><span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>%<span class="token keyword">external</span> __DEV__<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">|</span> <span class="token constructor variable">Some</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token class-name">Js</span><span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">"dev mode"</span><span class="token punctuation">)</span>
  <span class="token operator">|</span> <span class="token constructor variable">None</span> <span class="token operator">=&gt;</span> <span class="token class-name">Js</span><span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">"production mode"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
external map : 'a array -&gt; ('a -&gt; 'b) -&gt; 'b array = "map" [@@bs.send]
external filter : 'a array -&gt; ('a -&gt; 'b) -&gt; 'b array = "filter" [@@bs.send]

type request'
external asyncRequest: unit -&gt; request' = "asyncRequest"
external setWaitDuration: request' -&gt; int -&gt; request' = "setWaitDuration" [@@bs.send]
external send: request' -&gt; unit = "send" [@@bs.send]
 let () = match [%external __DEV__] with
| Some _ -&gt; Js.log "dev mode"
| None -&gt; Js.log "production mode"
<code class="output-language-javascript"><span class="token keyword">var</span> match <span class="token operator">=</span> <span class="token keyword">typeof</span> __DEV__ <span class="token operator">===</span> <span class="token string">"undefined"</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> __DEV__<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>match <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"dev mode"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"production mode"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* match Not a pure module */</span></code></pre>
  <p>
   Another example:
  </p>
  <div class="tab">
   <a class="button-language-ocaml tablinks" href="#" onclick="openLangTab(event, 'language-ocaml')"><code>ml</code></a><a class="button-language-reason tablinks" href="#" onclick="openLangTab(event, 'language-reason')"><code>re</code></a><a class="tablinks" href="#" onclick="openLangTab(event, 'output-language-javascript')"><code>js</code></a>
  </div>
  <pre><code class="language-ocaml"><span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">match</span> <span class="token punctuation">[</span><span class="token operator">%</span><span class="token keyword">external</span> __filename<span class="token punctuation">]</span> <span class="token keyword">with</span>
<span class="token operator">|</span> <span class="token module variable">Some</span> f <span class="token operator">-&gt;</span> <span class="token module variable">Js</span><span class="token punctuation">.</span>log f
<span class="token operator">|</span> <span class="token module variable">None</span> <span class="token operator">-&gt;</span> <span class="token module variable">Js</span><span class="token punctuation">.</span>log <span class="token string">"non-node environment"</span>
</code><code class="language-reason"><span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>%<span class="token keyword">external</span> __filename<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">|</span> <span class="token constructor variable">Some</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token class-name">Js</span><span class="token punctuation">.</span>log<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
  <span class="token operator">|</span> <span class="token constructor variable">None</span> <span class="token operator">=&gt;</span> <span class="token class-name">Js</span><span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">"non-node environment"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
external map : 'a array -&gt; ('a -&gt; 'b) -&gt; 'b array = "map" [@@bs.send]
external filter : 'a array -&gt; ('a -&gt; 'b) -&gt; 'b array = "filter" [@@bs.send]

type request'
external asyncRequest: unit -&gt; request' = "asyncRequest"
external setWaitDuration: request' -&gt; int -&gt; request' = "setWaitDuration" [@@bs.send]
external send: request' -&gt; unit = "send" [@@bs.send]
 let () = match [%external __filename] with
| Some f -&gt; Js.log f
| None -&gt; Js.log "non-node environment"
<code class="output-language-javascript"><span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">typeof</span> __filename <span class="token operator">===</span> <span class="token string">"undefined"</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> __filename<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"non-node environment"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* f Not a pure module */</span></code></pre>
 </div>
</div>
<div class="search-overlay"></div>
</div>
<script>
function openLangTab(evt, langClassName) {
      evt.stopPropagation();
      evt.preventDefault();
      var i, tabcontent, tablinks;
      var target = evt.currentTarget;
      tabcontents = target.parentNode.nextElementSibling.querySelectorAll("code");
      tabcontents.forEach(function (tabcontent) {
        tabcontent.style.display = "none";
      });
      tablinks = target.parentNode.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      target.parentNode.nextElementSibling.getElementsByClassName(langClassName)[0].style.display = "block";
      evt.currentTarget.className += " active";
      return false;
    }
    Array.from(document.getElementsByClassName("button-language-ocaml")).forEach(function (element) { element.click(); });
</script>
<script>
// Toggle syntax button
    document.addEventListener('DOMContentLoaded', () => {
      const SYNTAXES = ['reason', 'ocaml']
      const CLASS_PREFIX = 'syntax__'
      
      const container = document.querySelector('#toggleSyntaxContainer');
      const re = container.children[0];
      const ml = container.children[1];
      re.addEventListener("click", () => {
        setCurrentSyntax("reason");
      });
      ml.addEventListener("click", () => {
        setCurrentSyntax("ocaml");
      });

      let currentSyntax
      let setCurrentSyntax = (syntax = SYNTAXES[0]) => {
        document.body.classList.remove(`${CLASS_PREFIX}${currentSyntax}`)
        document.body.classList.add(`${CLASS_PREFIX}${syntax}`)
        for (let i = 0; i < container.children.length; i++) {
          container.children[i].classList.remove(`selected`);
        }
        if (syntax === "reason") {
          re.classList.add(`selected`)
        } else {
          ml.classList.add(`selected`)
        }
        Array.from(document.getElementsByClassName(`button-language-${syntax}`)).forEach(function (element) { element.click(); });

        currentSyntax = syntax
        localStorage.setItem('syntax', currentSyntax)
      }

      setCurrentSyntax(localStorage.getItem('syntax', currentSyntax) || SYNTAXES[0])
    })
</script>
<script src="https://jchavarri.github.io/melange-docs/assets/js/just-the-docs.js" type="text/javascript"></script>
</body>
</html>
